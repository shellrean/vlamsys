(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{120:function(e,t,s){"use strict";s.r(t);var r=s(1);function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(s,!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var a={name:"SetPermission",data:function(){return{role_user:{role:"",user_id:""},role_selected:"",new_permission:[],loading:!1,alert_permission:!1,alert_role:!1}},created:function(){this.getRoles(),this.getAllPermission(),this.getUserLists()},computed:n({},Object(r.e)(["errors"]),{},Object(r.e)("user",{users:function(e){return e.users},roles:function(e){return e.roles},permissions:function(e){return e.permissions},role_permission:function(e){return e.role_permission}})),methods:n({},Object(r.b)("user",["getUserLists","getRoles","getAllPermission","getRolePermission","setRolePermission","setRoleUser"]),{},Object(r.d)("user",["CLEAR_ROLE_PERMISSION"]),{setRole:function(){var e=this;this.setRoleUser(this.role_user).then((function(){e.$notify({group:"foo",title:"Sukses",type:"success",text:"Role berhasil ditambah."}),e.role_user={role:"",user_id:""}}))},addPermission:function(e){var t=this.new_permission.findIndex((function(t){return t==e}));-1==t?this.new_permission.push(e):this.new_permission.plice(t,1)},checkPermission:function(){var e=this;this.loading=!0,this.getRolePermission(this.role_selected).then((function(){e.loading=!1,e.new_permission=e.role_permission}))},setPermission:function(){var e=this;this.setRolePermission({role_id:this.role_selected,permissions:this.new_permission}).then((function(t){"success"==t.status&&(e.$notify({group:"foo",title:"Sukses",type:"success",text:"Role permission berhasil ditambah."}),e.role_selected="",e.new_permission=[],e.loading=!1,e.CLEAR_ROLE_PERMISSION())}))}})},l=(s(85),s(4)),c=Object(l.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[e._v("\n\t\t\t\t\tAssign role to user\n\t\t\t\t")]),e._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Role")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.role_user.role,expression:"role_user.role"}],staticClass:"form-control",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.role_user,"role",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[e._v("Pilih")]),e._v(" "),e._l(e.roles,(function(t,r){return s("option",{key:r,domProps:{value:t.name}},[e._v(e._s(t.name))])}))],2),e._v(" "),e.errors.role_id?s("p",{staticClass:"text-danger"},[e._v(e._s(e.errors.role_id[0]))]):e._e()]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",[e._v("User")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.role_user.user_id,expression:"role_user.user_id"}],staticClass:"form-control",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.role_user,"user_id",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[e._v("Pilih")]),e._v(" "),e._l(e.users,(function(t,r){return s("option",{key:r,domProps:{value:t.id}},[e._v(e._s(t.name)+" ("+e._s(t.email)+")")])}))],2)]),e._v(" "),s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-primary btn-sm rounded-0",on:{click:e.setRole}},[e._v("Set role")])])])])]),e._v(" "),s("div",{staticClass:"col-md-7"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[e._v("Set permission")]),e._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Role")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.role_selected,expression:"role_selected"}],staticClass:"form-control",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.role_selected=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("Pilih")]),e._v(" "),e._l(e.roles,(function(t,r){return s("option",{key:r,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2),e._v(" "),e.errors.role_id?s("p",{staticClass:"text-danger"},[e._v(e._s(e.errors.role_id[0]))]):e._e()]),e._v(" "),s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-primary btn-sm rounded-0",on:{click:e.checkPermission}},[e._v(e._s(e.loading?"Loading...":"Check"))])]),e._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"nav-tabs-custom"},[e._m(0),e._v(" "),s("div",{staticClass:"tab-content"},[s("div",{staticClass:"tab-pane fade show active",attrs:{id:"tab_1"}},[e._l(e.permissions,(function(t,r){return[s("input",{key:r,staticClass:"minimal-red",attrs:{type:"checkbox"},domProps:{value:t.name,checked:-1!=e.role_permission.findIndex((function(e){return e.name==t.name}))},on:{click:function(s){return e.addPermission(t.name)}}}),e._v(" "+e._s(t.name)+" "),s("br",{key:"row"+r}),e._v(" "),(r+1)%4==0?s("br",{key:"enter"+r}):e._e()]}))],2)])])]),e._v(" "),s("div",{staticClass:"pull-right"},[s("button",{staticClass:"btn btn-primary btn-sm rounded-0",on:{click:e.setPermission}},[s("i",{staticClass:"fa fa-send"}),e._v(" Set Permission\n                        ")])])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nav nav-tabs"},[t("a",{staticClass:"nav-item nav-link active",attrs:{id:"nav-home-tab","data-toggle":"tab",href:"#tab_1"}},[this._v("Permissions")])])}],!1,null,null,null);t.default=c.exports},36:function(e,t,s){var r=s(86);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};s(15)(r,i);r.locals&&(e.exports=r.locals)},85:function(e,t,s){"use strict";var r=s(36);s.n(r).a},86:function(e,t,s){(e.exports=s(14)(!1)).push([e.i,"\n.tab-pane {\r\n\theight: 250px;\r\n\toverflow-y: scroll;\n}\r\n",""])}}]);